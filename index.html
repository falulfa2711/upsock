<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Up ×¡×˜×•×§ | ×“×£ ×”×‘×™×ª</title>
    <style>
        :root { --primary: #ed1c24; --dark: #1a1a1a; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--light); direction: rtl; }

        /* ×¡×¨×’×œ ×¢×’×œ×” ×§×‘×•×¢ */
        .cart-sticky { position: sticky; top: 0; z-index: 1000; background: var(--primary); color: white; padding: 12px; display: flex; justify-content: space-around; cursor: pointer; font-weight: bold; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

        /* ×ª×¤×¨×™×˜ ×¢×œ×™×•×Ÿ */
        .nav-bar { background: white; padding: 15px; display: flex; justify-content: center; gap: 25px; border-bottom: 1px solid #eee; }
        .nav-bar a { text-decoration: none; color: var(--dark); font-weight: bold; cursor: pointer; }

        /* ×œ×•×’×• */
        .logo-section { padding: 25px; text-align: center; background: white; }
        .logo-section img { max-width: 250px; width: 100%; border-radius: 15px; }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        /* ××—×œ×§×•×ª - ×ª××•× ×•×ª ×’×“×•×œ×•×ª ×•×‘×¨×•×¨×•×ª */
        .dept-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; }
        .dept-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); text-align: center; cursor: pointer; border: 1px solid #eee; }
        .dept-card img { width: 100%; height: 120px; object-fit: cover; }
        .dept-card h3 { margin: 10px 0; font-size: 1.1em; color: var(--dark); }

        /* ×—×™×¤×•×© - × ×§×™ */
        .search-area { background: white; padding: 30px; border-radius: 20px; margin: 30px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .search-input { width: 100%; max-width: 500px; padding: 15px; border-radius: 30px; border: 2px solid #ddd; font-size: 1.1em; text-align: center; outline: none; }
        
        /* ×’×¨×™×“ ××•×¦×¨×™× - ××•×¤×™×¢ ×¨×§ ×‘×—×™×¤×•×© */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; margin-top: 20px; }
        .product-card { background: white; border-radius: 12px; padding: 15px; border: 1px solid #eee; text-align: center; }
        .price { color: var(--primary); font-size: 1.3em; font-weight: bold; margin: 10px 0; }
        .add-btn { background: var(--dark); color: white; border: none; width: 100%; padding: 8px; border-radius: 6px; cursor: pointer; }

        /* ×“×¤×™× ×¤× ×™××™×™× - ××•×¡×ª×¨×™× ×›×‘×¨×™×¨×ª ××—×“×œ */
        .page-content { display: none; background: white; padding: 25px; border-radius: 20px; margin-top: 20px; }
        .active-page { display: block; }

        /* ××•×“×œ ×¢×’×œ×” */
        .modal { display: none; position: fixed; z-index: 2000; inset: 0; background: rgba(0,0,0,0.7); padding: 20px; }
        .modal-content { background: white; border-radius: 20px; padding: 20px; max-width: 400px; margin: 50px auto; text-align: right; }
    </style>
</head>
<body>

<div class="cart-sticky" onclick="toggleCart()">
    <span>ğŸ›’ <span id="cart-count">0</span> ××•×¦×¨×™×</span>
    <span>×¡×”"×›: â‚ª<span id="cart-total">0</span></span>
</div>

<div class="nav-bar">
    <a onclick="showPage('home')">ğŸ  ×“×£ ×”×‘×™×ª</a>
    <a onclick="showPage('contact')">ğŸ“ ×¦×•×¨ ×§×©×¨</a>
    <a onclick="showPage('reviews')">â­ ×—×•×•×ª ×“×¢×ª</a>
</div>

<div id="home-page" class="page-content active-page">
    <div class="logo-section">
        <img src="images/logo.jpg" onerror="this.src='images/logo.png'" alt="Up Stock">
    </div>

    <div class="container">
        <div class="dept-grid">
            <div class="dept-card" onclick="filterBy('×—×“ ×¤×¢××™')"><img src="images/hadpaami.jpg"><h3>×—×“ ×¤×¢××™</h3></div>
            <div class="dept-card" onclick="filterBy('××¤×™×™×”')"><img src="images/bake1.jpeg"><h3>××¤×™×™×” ×•××˜×‘×—</h3></div>
            <div class="dept-card" onclick="filterBy('× ×™×§×™×•×Ÿ')"><img src="images/clean1.jpeg"><h3>× ×™×§×™×•×Ÿ</h3></div>
            <div class="dept-card" onclick="filterBy('×™×•× ×”×•×œ×“×ª')"><img src="images/bday1.jpeg"><h3>×™××™ ×”×•×œ×“×ª</h3></div>
        </div>

        <div class="search-area">
            <h3>×—×™×¤×•×© ××•×¦×¨ ×‘××œ××™</h3>
            <input type="text" id="searchInput" class="search-input" placeholder="×”×§×œ×“ ×©× ××•×¦×¨..." onkeyup="search()">
            <div id="status-text" style="margin-top:10px; color:#888;">×”××•×¦×¨×™× ×™×•×¤×™×¢×• ×›××Ÿ ×‘×–××Ÿ ×”×—×™×¤×•×©</div>
            <div class="products-grid" id="product-list"></div>
        </div>
    </div>
</div>

<div id="contact-page" class="page-content">
    <div class="container">
        <h2>ğŸ“ ×¦×•×¨ ×§×©×¨</h2>
        <p><strong>×˜×œ×¤×•×Ÿ:</strong> 054-939-7753</p>
        <p><strong>×›×ª×•×‘×ª:</strong> ×¨×—×•×‘ ×”×’×™×”× ×•× 1 (×¢×“×›×Ÿ ××ª ×”×›×ª×•×‘×ª ×©×œ×š)</p>
        <a href="https://waze.com/ul?q=Up%20Stock" style="background:#33ccff; color:white; padding:10px 20px; border-radius:50px; text-decoration:none; display:inline-block;">× ×•×•×˜ ××œ×™× ×• ×‘-Waze ğŸš—</a>
    </div>
</div>

<div id="reviews-page" class="page-content">
    <div class="container">
        <h2>â­ ×—×•×•×ª ×“×¢×ª ×œ×§×•×—×•×ª</h2>
        <div style="background:#f9f9f9; padding:15px; border-radius:10px; margin-bottom:10px;">
            "×©×™×¨×•×ª ××”×™×¨ ×•××—×™×¨×™× ××¦×•×™× ×™×!" - ××•×¨×™ ×©.
        </div>
        <div style="background:#f9f9f9; padding:15px; border-radius:10px;">
            "×”×›×™ × ×•×— ×©×™×© ×‘×“×™×§×ª ××œ××™ ××•× ×œ×™×™×Ÿ." - ×“× ×” ×œ.
        </div>
    </div>
</div>

<div id="cartModal" class="modal">
    <div class="modal-content">
        <h3>×”×¡×œ ×©×œ×™</h3>
        <div id="cartItems"></div>
        <hr>
        <h4>×¡×”"×›: â‚ª<span id="modal-total">0</span></h4>
        <button onclick="sendToWA()" style="background:#25d366; color:white; border:none; width:100%; padding:15px; border-radius:10px; font-weight:bold; cursor:pointer;">×©×œ×— ×”×–×× ×” ×‘×•×•××˜×¡××¤</button>
        <button onclick="toggleCart()" style="width:100%; background:none; border:none; margin-top:10px; color:#999;">×¡×’×•×¨</button>
    </div>
</div>

<script>
let inventory = [];
let cart = [];

async function load() {
    try {
        const r = await fetch('stock.csv?v=' + Date.now());
        const t = await r.text();
        inventory = t.split('\n').slice(2).map(row => {
            const c = row.split(/[;,]/);
            return { name: c[2]?.replace(/"/g,''), price: parseFloat(c[6]), cat: c[1] };
        }).filter(p => p.name && !isNaN(p.price));
    } catch(e) { console.log("Error loading CSV"); }
}

function showPage(pageId) {
    document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active-page'));
    document.getElementById(pageId + '-page').classList.add('active-page');
    window.scrollTo(0,0);
}

function search() {
    const q = document.getElementById('searchInput').value.toLowerCase().trim();
    const list = document.getElementById('product-list');
    const status = document.getElementById('status-text');
    if(!q) { list.innerHTML = ""; status.innerText = "×”××•×¦×¨×™× ×™×•×¤×™×¢×• ×›××Ÿ ×‘×–××Ÿ ×”×—×™×¤×•×©"; return; }
    const res = inventory.filter(p => p.name.toLowerCase().includes(q));
    status.innerText = res.length ? `× ××¦××• ${res.length} ××•×¦×¨×™×:` : "×œ× × ××¦××• ×ª×•×¦××•×ª";
    list.innerHTML = res.map(p => `
        <div class="product-card">
            <div style="font-size:0.9em; height:35px; overflow:hidden;">${p.name}</div>
            <div class="price">â‚ª${p.price.toFixed(2)}</div>
            <button class="add-btn" onclick="add('${p.name.replace(/'/g,"")}', ${p.price})">×”×•×¡×£ +</button>
        </div>
    `).join('');
}

function filterBy(cat) {
    document.getElementById('searchInput').value = cat;
    search();
}

function add(name, price) {
    const i = cart.find(x => x.name === name);
    if(i) i.qty++; else cart.push({name, price, qty:1});
    updateUI();
}

function updateUI() {
    const count = cart.reduce((s,i) => s+i.qty, 0);
    const total = cart.reduce((s,i) => s+(i.price*i.qty), 0);
    document.getElementById('cart-count').innerText = count;
    document.getElementById('cart-total').innerText = total.toFixed(2);
    document.getElementById('modal-total').innerText = total.toFixed(2);
    document.getElementById('cartItems').innerHTML = cart.map(i => `<div>${i.name} (x${i.qty})</div>`).join('');
}

function toggleCart() { const m = document.getElementById('cartModal'); m.style.display = m.style.display === 'block' ? 'none' : 'block'; }

function sendToWA() {
    let msg = "×”×–×× ×” ×-Up ×¡×˜×•×§:\n";
    cart.forEach(i => msg += `â€¢ ${i.name} x${i.qty}\n`);
    window.open(`https://wa.me/972549397753?text=${encodeURIComponent(msg)}`);
}

window.onload = load;
</script>
</body>
</html>
